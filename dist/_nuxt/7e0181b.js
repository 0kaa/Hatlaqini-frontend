(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{546:function(t,e,o){var content=o(548);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(10).default)("e55128aa",content,!0,{sourceMap:!1})},547:function(t,e,o){"use strict";o(546)},548:function(t,e,o){(e=o(9)(!1)).push([t.i,".grid[data-v-ddc0ac82]{display:grid;grid-auto-flow:column;grid-column-gap:20px}",""]),t.exports=e},549:function(t,e,o){"use strict";o.r(e);var r={name:"Posts",props:["posts","nextPosts"],methods:{setRatingPost:function(t,e){this.$axios.post("/posts/rating",{user_id:this.$store.state.user._id,post_id:e,rating:t})},loadMorePosts:function(){var t=this;this.$axios.get(this.nextPosts).then((function(e){t.$store.commit("loadMorePosts",e.data),t.posts=t.$store.state.posts}))},actionWithPost:function(t,e,o){var r=this;this.$store.state.user&&this.$store.state.user.username&&(this.loading=!0,this.$axios.put("/posts/action",{id:e,user_id:this.$store.state.user._id,vote_type:t}).then((function(t){r.posts.posts[o].votes=t.data.votes,r.$store.commit("setPosts",r.posts)})))}},data:function(){return{loading:!1,attrs:{elevation:10}}}},n=(o(547),o(33)),l=o(34),c=o.n(l),v=o(567),d=o(388),m=o(187),h=o(78),f=o(533),_=o(563),y=o(188),$=o(154),x=o(114),P=o(192),k=o(77),C=o(568),V=o(536),w=o(564),T=o(537),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-col",{attrs:{cols:"12",md:"6"}},[t.posts.posts?o("v-row",t._l(t.posts.posts,(function(e,i){return o("v-col",{key:e._id,attrs:{cols:"12"}},[o("div",{staticClass:"post-items"},[o("v-card",{staticClass:"mx-auto darken-5",attrs:{elevation:"0"}},[o("v-app-bar",{attrs:{absolute:"",flat:"",color:"transparent"}},[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"white",small:"",icon:""}},[o("v-icon",[t._v("mdi-dots-horizontal")])],1)],1),t._v(" "),o("v-list-item",{staticClass:"grow"},[o("v-list-item-avatar",{attrs:{color:"grey darken-3"}},[o("v-img",{staticClass:"elevation-6",attrs:{alt:"",src:"https://avataaars.io/?avatarStyle=Transparent&topType=ShortHairShortCurly&accessoriesType=Prescription02&hairColor=Black&facialHairType=Blank&clotheType=Hoodie&clotheColor=White&eyeType=Default&eyebrowType=DefaultNatural&mouthType=Default&skinColor=Light"}})],1),t._v(" "),o("v-list-item-content",[o("v-list-item-title",[t._v(t._s(e.user))]),t._v(" "),o("v-list-item-subtitle",[t._v("\n                "+t._s(t._f("formatDate")(e.created_at)))])],1)],1),t._v(" "),o("v-card-text",{staticClass:"text--primary"},[o("div",[t._v(t._s(e.author_name))])]),t._v(" "),o("v-rating",{attrs:{readonly:"",length:"5",color:"orange","background-color":"grey lighten-1",hover:""},on:{input:function(o){return t.setRatingPost(o,e._id)}},model:{value:e.avgRating,callback:function(o){t.$set(e,"avgRating",o)},expression:"post.avgRating"}}),t._v(" "),o("v-divider"),t._v(" "),o("v-card-actions",{staticClass:"grid"},[o("v-btn",{attrs:{color:t.$store.state.user&&e.votes.like.includes(t.$store.state.user._id)?"primary":"",text:""},on:{click:function(o){return o.preventDefault(),t.actionWithPost("like",e._id,i)}}},[o("v-icon",[t._v(" mdi-thumb-up-outline ")]),t._v(" "),o("h4",{staticClass:"ml-2"},[t._v("\n                "+t._s(e.votes.like.length||0)+"\n              ")])],1)],1)],1)],1)])})),1):o("v-row",t._l(6,(function(i){return o("v-col",{key:i,attrs:{cols:"12",md:"4"}},[o("v-skeleton-loader",t._b({attrs:{loading:!0,type:"image, list-item-three-line, actions"}},"v-skeleton-loader",t.attrs,!1))],1)})),1),t._v(" "),t.nextPosts&&t.$store.state.posts.totalPages>0&&t.$store.state.posts.totalPages!==t.$store.state.posts.currentPage?o("v-row",{staticClass:"mt-5",attrs:{justify:"center"}},[o("v-btn",{on:{click:t.loadMorePosts}},[t._v("Load More")])],1):t._e()],1)}),[],!1,null,"ddc0ac82",null);e.default=component.exports;c()(component,{VAppBar:v.a,VBtn:d.a,VCard:m.a,VCardActions:h.a,VCardText:h.b,VCol:f.a,VDivider:_.a,VIcon:y.a,VImg:$.a,VListItem:x.a,VListItemAvatar:P.a,VListItemContent:k.a,VListItemSubtitle:k.b,VListItemTitle:k.c,VRating:C.a,VRow:V.a,VSkeletonLoader:w.a,VSpacer:T.a})},566:function(t,e,o){"use strict";o.r(e);o(87);var r=o(21),n={components:{CreatePost:o(389).default},name:"Home",activated:function(){this.$fetchState.timestamp<=Date.now()-1e4&&this.$fetch()},fetch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/posts").then((function(t){return t.data}));case 2:o=e.sent,t.posts=o,t.$store.commit("setPosts",t.posts);case 5:case"end":return e.stop()}}),e)})))()},data:function(){return{posts:[]}}},l=o(33),component=Object(l.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-flex justify-center"},[e("posts",{attrs:{posts:this.posts,nextPosts:"posts?page="+(this.$store.state.posts.currentPage+1)}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Posts:o(549).default})}}]);